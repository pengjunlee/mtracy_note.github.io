<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringBoot基础之--使用RedisTemplate访问Redis数据结构 | 李朋军的个人博客</title><meta name="description" content="SpringBoot项目如何使用RedisTemplate访问Redis数据结构？"><meta name="keywords" content="Java, SpringBoot"><meta name="author" content="pengjunlee,pengjunlee@163.com"><meta name="copyright" content="pengjunlee"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="http://pengjunlee.3vzhuji.net/static/img/favicon.ico"><link rel="canonical" href="https://coder.mtracy.club/2020/07/25/springbootB24/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="SpringBoot基础之--使用RedisTemplate访问Redis数据结构"><meta property="og:url" content="https://coder.mtracy.club/2020/07/25/springbootB24/"><meta property="og:site_name" content="李朋军的个人博客"><meta property="og:description" content="SpringBoot项目如何使用RedisTemplate访问Redis数据结构？"><meta property="og:image" content="http://pengjunlee.3vzhuji.net/static/img/top_img24.jpg"><meta property="article:published_time" content="2020-07-25T14:24:00.000Z"><meta property="article:modified_time" content="2020-07-25T14:24:00.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="SpringBoot基础之--使用spring-boot-maven-plugin插件打包应用" href="https://coder.mtracy.club/2020/07/25/springbootB25/"><link rel="next" title="SpringBoot基础之--使用Junit进行单元测试" href="https://coder.mtracy.club/2020/07/25/springbootB23/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"I,LOVE,YOU","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="http://pengjunlee.3vzhuji.net/static/img/avatar.png" onerror="onerror=null;src='http://pengjunlee.3vzhuji.net/static/img/cover1.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">163</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">13</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis-数据结构简介"><span class="toc-number">1.</span> <span class="toc-text">Redis 数据结构简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RedisTemplate介绍"><span class="toc-number">2.</span> <span class="toc-text">RedisTemplate介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Type-Parameters"><span class="toc-number">2.1.</span> <span class="toc-text">Type Parameters:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#StringRedisTemplate与RedisTemplate"><span class="toc-number">2.2.</span> <span class="toc-text">StringRedisTemplate与RedisTemplate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis的String数据结构-（推荐使用StringRedisTemplate）"><span class="toc-number">3.</span> <span class="toc-text">Redis的String数据结构 （推荐使用StringRedisTemplate）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis的List数据结构"><span class="toc-number">4.</span> <span class="toc-text">Redis的List数据结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis的Hash数据结构"><span class="toc-number">5.</span> <span class="toc-text">Redis的Hash数据结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis的Set数据结构"><span class="toc-number">6.</span> <span class="toc-text">Redis的Set数据结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis的ZSet数据结构"><span class="toc-number">7.</span> <span class="toc-text">Redis的ZSet数据结构</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(http://pengjunlee.3vzhuji.net/static/img/top_img24.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">李朋军的个人博客</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">SpringBoot基础之--使用RedisTemplate访问Redis数据结构</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-07-25 14:24:00"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-07-25</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-25 14:24:00"><i class="fas fa-history fa-fw"></i> 更新于 2020-07-25</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/SpringBoot%E5%9F%BA%E7%A1%80/">SpringBoot基础</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="Redis-数据结构简介"><a href="#Redis-数据结构简介" class="headerlink" title="Redis 数据结构简介"></a>Redis 数据结构简介</h1><p>Redis 可以存储键与5种不同数据结构类型之间的映射，这5种数据结构类型分别为String（字符串）、List（列表）、Set（集合）、Hash（散列）和 Zset（有序集合）。</p>
<p>下面来对这5种数据结构类型作简单的介绍：</p>
<div align=center>

<p><img src= "/img/loading.gif" data-src="http://pengjunlee.3vzhuji.net/static/springboot/59.png" alt="Actuator监控示意图" title="Actuator监控示意图"></p>
<div align=left>

<p>Redis 5种数据结构的概念大致介绍到这边，下面将结合Spring封装的RedisTemplate来对这5种数据结构的运用进行演示。</p>
<h1 id="RedisTemplate介绍"><a href="#RedisTemplate介绍" class="headerlink" title="RedisTemplate介绍"></a>RedisTemplate介绍</h1><p>spring 封装了 RedisTemplate 对象来进行对redis的各种操作，它支持所有的 redis 原生的 api。</p>
<p>RedisTemplate在spring代码中的结构如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.data.redis.core</span><br><span class="line">Class RedisTemplate&lt;K,V&gt;</span><br><span class="line">java.lang.Object</span><br><span class="line">    org.springframework.data.redis.core.RedisAccessor</span><br><span class="line">        org.springframework.data.redis.core.RedisTemplate&lt;K,V&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Type-Parameters"><a href="#Type-Parameters" class="headerlink" title="Type Parameters:"></a>Type Parameters:</h2><p><strong>K</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; the Redis key type against which the template works (usually a String)</span><br><span class="line">&#x2F;&#x2F; 模板中的Redis key的类型（通常为String）如：RedisTemplate&lt;String, Object&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：如果没特殊情况，切勿定义成RedisTemplate&lt;Object, Object&gt;，否则根据里氏替换原则，使用的时候会造成类型错误 。</p>
</blockquote>
<p><strong>V</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; the Redis value type against which the template works</span><br><span class="line">&#x2F;&#x2F; 模板中的Redis value的类型</span><br></pre></td></tr></table></figure>
<p>RedisTemplate中定义了对5种数据结构操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redisTemplate.opsForValue();<span class="comment">//操作字符串</span></span><br><span class="line">redisTemplate.opsForHash();<span class="comment">//操作hash</span></span><br><span class="line">redisTemplate.opsForList();<span class="comment">//操作list</span></span><br><span class="line">redisTemplate.opsForSet();<span class="comment">//操作set</span></span><br><span class="line">redisTemplate.opsForZSet();<span class="comment">//操作有序set</span></span><br></pre></td></tr></table></figure>

<h2 id="StringRedisTemplate与RedisTemplate"><a href="#StringRedisTemplate与RedisTemplate" class="headerlink" title="StringRedisTemplate与RedisTemplate"></a>StringRedisTemplate与RedisTemplate</h2><ul>
<li><p>两者的关系是StringRedisTemplate继承RedisTemplate。</p>
</li>
<li><p>两者的数据是不共通的；也就是说StringRedisTemplate只能管理StringRedisTemplate里面的数据，RedisTemplate只能管理RedisTemplate中的数据。</p>
</li>
<li><p>SDR默认采用的序列化策略有两种，一种是String的序列化策略，一种是JDK的序列化策略。</p>
</li>
<li><p>StringRedisTemplate默认采用的是String的序列化策略，保存的key和value都是采用此策略序列化保存的。</p>
</li>
<li><p>RedisTemplate默认采用的是JDK的序列化策略，保存的key和value都是采用此策略序列化保存的。</p>
</li>
</ul>
<p>RedisTemplate配置如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;String, Object&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="Redis的String数据结构-（推荐使用StringRedisTemplate）"><a href="#Redis的String数据结构-（推荐使用StringRedisTemplate）" class="headerlink" title="Redis的String数据结构 （推荐使用StringRedisTemplate）"></a>Redis的String数据结构 （推荐使用StringRedisTemplate）</h1><blockquote>
<p><strong>注意</strong>：如果使用RedisTemplate需要更改序列化方式</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RedisSerializer&lt;String&gt; stringSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">template.setKeySerializer(stringSerializer );</span><br><span class="line">template.setValueSerializer(stringSerializer );</span><br><span class="line">template.setHashKeySerializer(stringSerializer );</span><br><span class="line">template.setHashValueSerializer(stringSerializer );</span><br></pre></td></tr></table></figure>
<br/>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface ValueOperations&lt;K,V&gt;</span><br><span class="line">&#x2F;&#x2F; Redis operations for simple (or in Redis terminology &#39;string&#39;) values.</span><br><span class="line">&#x2F;&#x2F; ValueOperations可以对String数据结构进行操作</span><br></pre></td></tr></table></figure>
**set void set(K key, V value);**
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：redisTemplate.opsForValue().set(&quot;name&quot;,&quot;tom&quot;);</span><br><span class="line">结果：redisTemplate.opsForValue().get(&quot;name&quot;)  输出结果为tom</span><br></pre></td></tr></table></figure>
**set void set(K key, V value, long timeout, TimeUnit unit);**
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：redisTemplate.opsForValue().set(&quot;name&quot;,&quot;tom&quot;,10, TimeUnit.SECONDS);</span><br><span class="line">结果：redisTemplate.opsForValue().get(&quot;name&quot;)由于设置的是10秒失效，十秒之内查询有结果，十秒之后返回为null</span><br></pre></td></tr></table></figure>
**set void set(K key, V value, long offset);**

<p>该方法是用 value 参数覆写(overwrite)给定 key 所储存的字符串值，从偏移量 offset 开始</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(&quot;key&quot;,&quot;hello world&quot;);</span><br><span class="line">      template.opsForValue().set(&quot;key&quot;,&quot;redis&quot;, 6);</span><br><span class="line">      System.out.println(&quot;***************&quot;+template.opsForValue().get(&quot;key&quot;));</span><br><span class="line">结果：***************hello redis</span><br></pre></td></tr></table></figure>
<p><strong>setIfAbsent Boolean setIfAbsent(K key, V value);</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForValue().setIfAbsent(&quot;multi1&quot;,&quot;multi1&quot;));&#x2F;&#x2F;false  multi1之前已经存在</span><br><span class="line"> </span><br><span class="line">      System.out.println(template.opsForValue().setIfAbsent(&quot;multi111&quot;,&quot;multi111&quot;));&#x2F;&#x2F;true  multi111之前不存在</span><br><span class="line">结果：false</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p><strong>multiSet void multiSet(Map&lt;? extends K, ? extends V&gt; m);</strong><br>为多个键分别设置它们的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps &#x3D; new HashMap&lt;String, String&gt;();</span><br><span class="line">     maps.put(&quot;multi1&quot;,&quot;multi1&quot;);</span><br><span class="line">     maps.put(&quot;multi2&quot;,&quot;multi2&quot;);</span><br><span class="line">     maps.put(&quot;multi3&quot;,&quot;multi3&quot;);</span><br><span class="line">     template.opsForValue().multiSet(maps);</span><br><span class="line">     List&lt;String&gt; keys &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     keys.add(&quot;multi1&quot;);</span><br><span class="line">     keys.add(&quot;multi2&quot;);</span><br><span class="line">     keys.add(&quot;multi3&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line">结果：[multi1, multi2, multi3]</span><br></pre></td></tr></table></figure>
<p><strong>multiSetIfAbsent Boolean multiSetIfAbsent(Map&lt;? extends K, ? extends V&gt; m);</strong><br>为多个键分别设置它们的值，如果存在则返回false，不存在返回true</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps &#x3D; new HashMap&lt;String, String&gt;();</span><br><span class="line">     maps.put(&quot;multi11&quot;,&quot;multi11&quot;);</span><br><span class="line">     maps.put(&quot;multi22&quot;,&quot;multi22&quot;);</span><br><span class="line">     maps.put(&quot;multi33&quot;,&quot;multi33&quot;);</span><br><span class="line">     Map&lt;String,String&gt; maps2 &#x3D; new HashMap&lt;String, String&gt;();</span><br><span class="line">     maps2.put(&quot;multi1&quot;,&quot;multi1&quot;);</span><br><span class="line">     maps2.put(&quot;multi2&quot;,&quot;multi2&quot;);</span><br><span class="line">     maps2.put(&quot;multi3&quot;,&quot;multi3&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().multiSetIfAbsent(maps));</span><br><span class="line">     System.out.println(template.opsForValue().multiSetIfAbsent(maps2));</span><br><span class="line">结果：true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<p><strong>get V get(Object key);</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(&quot;key&quot;,&quot;hello world&quot;);</span><br><span class="line">     System.out.println(&quot;***************&quot;+template.opsForValue().get(&quot;key&quot;));</span><br><span class="line">结果：***************hello world</span><br></pre></td></tr></table></figure>
<p><strong>getAndSet V getAndSet(K key, V value);</strong><br>设置键的字符串值并返回其旧值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(&quot;getSetTest&quot;,&quot;test&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().getAndSet(&quot;getSetTest&quot;,&quot;test2&quot;));</span><br><span class="line">结果：test</span><br></pre></td></tr></table></figure>
<p><strong>multiGet List<V> multiGet(Collection<K> keys);</strong><br>为多个键分别取出它们的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps &#x3D; new HashMap&lt;String, String&gt;();</span><br><span class="line">     maps.put(&quot;multi1&quot;,&quot;multi1&quot;);</span><br><span class="line">     maps.put(&quot;multi2&quot;,&quot;multi2&quot;);</span><br><span class="line">     maps.put(&quot;multi3&quot;,&quot;multi3&quot;);</span><br><span class="line">     template.opsForValue().multiSet(maps);</span><br><span class="line">     List&lt;String&gt; keys &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     keys.add(&quot;multi1&quot;);</span><br><span class="line">     keys.add(&quot;multi2&quot;);</span><br><span class="line">     keys.add(&quot;multi3&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line">结果：[multi1, multi2, multi3]</span><br></pre></td></tr></table></figure>
<p><strong>increment Long increment(K key, long delta);</strong><br>支持整数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().increment(&quot;increlong&quot;,1);</span><br><span class="line">     System.out.println(&quot;***************&quot;+template.opsForValue().get(&quot;increlong&quot;));</span><br><span class="line">结果：***************1</span><br></pre></td></tr></table></figure>
<p><strong>increment Double increment(K key, double delta);</strong><br>也支持浮点数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().increment(&quot;increlong&quot;,1.2);</span><br><span class="line">     System.out.println(&quot;***************&quot;+template.opsForValue().get(&quot;increlong&quot;));</span><br><span class="line">结果：***************2.2</span><br></pre></td></tr></table></figure>
<p><strong>append Integer append(K key, String value);</strong><br>如果key已经存在并且是一个字符串，则该命令将该值追加到字符串的末尾。如果键不存在，则它被创建并设置为空字符串，因此APPEND在这种特殊情况下将类似于SET。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().append(&quot;appendTest&quot;,&quot;Hello&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().get(&quot;appendTest&quot;));</span><br><span class="line">     template.opsForValue().append(&quot;appendTest&quot;,&quot;world&quot;);</span><br><span class="line">     System.out.println(template.opsForValue().get(&quot;appendTest&quot;));</span><br><span class="line">结果：Hello</span><br><span class="line">     Helloworld</span><br></pre></td></tr></table></figure>
<p><strong>get String get(K key, long start, long end);</strong><br>截取key所对应的value字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：&#x2F;&#x2F; appendTest对应的value为Helloworld</span><br><span class="line">     System.out.println(&quot;*********&quot;+template.opsForValue().get(&quot;appendTest&quot;,0,5));</span><br><span class="line">结果：*********Hellow</span><br><span class="line">使用：System.out.println(&quot;*********&quot;+template.opsForValue().get(&quot;appendTest&quot;,0,-1));</span><br><span class="line">结果：*********Helloworld</span><br><span class="line">使用：System.out.println(&quot;*********&quot;+template.opsForValue().get(&quot;appendTest&quot;,-3,-1));</span><br><span class="line">结果：*********rld</span><br></pre></td></tr></table></figure>
<p><strong>size Long size(K key);</strong><br>返回key所对应的value值得长度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(&quot;key&quot;,&quot;hello world&quot;);</span><br><span class="line">    System.out.println(&quot;***************&quot;+template.opsForValue().size(&quot;key&quot;));</span><br><span class="line">结果：***************11</span><br></pre></td></tr></table></figure>
<p><strong>setBit Boolean setBit(K key, long offset, boolean value);</strong><br>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)</p>
<p>key键对应的值value对应的ascii码,在offset的位置(从左向右数)变为value</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(&quot;bitTest&quot;,&quot;a&quot;);</span><br><span class="line">     &#x2F;&#x2F; &#39;a&#39; 的ASCII码是 97。转换为二进制是：01100001</span><br><span class="line">     &#x2F;&#x2F; &#39;b&#39; 的ASCII码是 98  转换为二进制是：01100010</span><br><span class="line">     &#x2F;&#x2F; &#39;c&#39; 的ASCII码是 99  转换为二进制是：01100011</span><br><span class="line">     &#x2F;&#x2F; 因为二进制只有0和1，在setbit中true为1，false为0，因此我要变为&#39;b&#39;的话第六位设置为1，第七位设置为0</span><br><span class="line">     template.opsForValue().setBit(&quot;bitTest&quot;,6, true);</span><br><span class="line">     template.opsForValue().setBit(&quot;bitTest&quot;,7, false);</span><br><span class="line">     System.out.println(template.opsForValue().get(&quot;bitTest&quot;));</span><br><span class="line">结果：b</span><br></pre></td></tr></table></figure>
<p><strong>getBit Boolean getBit(K key, long offset);</strong><br>获取键对应值的ascii码的在offset处位值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForValue().getBit(&quot;bitTest&quot;,7));</span><br><span class="line">结果：false</span><br></pre></td></tr></table></figure>

<h1 id="Redis的List数据结构"><a href="#Redis的List数据结构" class="headerlink" title="Redis的List数据结构"></a>Redis的List数据结构</h1><p>这边我们把RedisTemplate序列化方式改回之前的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;String, Object&gt;();</span><br><span class="line">template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br></pre></td></tr></table></figure>
<br/>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface ListOperations&lt;K,V&gt;</span><br><span class="line">&#x2F;&#x2F; Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素导列表的头部（左边）或者尾部（右边）</span><br><span class="line">&#x2F;&#x2F; ListOperations专门操作list列表</span><br></pre></td></tr></table></figure>
**List<V> range(K key, long start, long end);**
返回存储在键中的列表的指定元素。偏移开始和停止是基于零的索引，其中0是列表的第一个元素（列表的头部），1是下一个元素
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">结果:[c#, c++, python, java, c#, c#]</span><br></pre></td></tr></table></figure>
**void trim(K key, long start, long end);**
修剪现有列表，使其只包含指定的指定范围的元素，起始和停止都是基于0的索引
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">     template.opsForList().trim(&quot;list&quot;,1,-1);&#x2F;&#x2F;裁剪第一个元素</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">结果: [c#, c++, python, java, c#, c#]</span><br><span class="line">     [c++, python, java, c#, c#]</span><br></pre></td></tr></table></figure>
**Long size(K key);**
返回存储在键中的列表的长度。如果键不存在，则将其解释为空列表，并返回0。当key存储的值不是列表时返回错误。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().size(&quot;list&quot;));</span><br><span class="line">结果:6</span><br></pre></td></tr></table></figure>
**Long leftPush(K key, V value);**
将所有指定的值插入存储在键的列表的头部。如果键不存在，则在执行推送操作之前将其创建为空列表。（从左边插入）
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().leftPush(&quot;list&quot;,&quot;java&quot;);</span><br><span class="line">     template.opsForList().leftPush(&quot;list&quot;,&quot;python&quot;);</span><br><span class="line">     template.opsForList().leftPush(&quot;list&quot;,&quot;c++&quot;);</span><br><span class="line">结果:&#x2F;&#x2F; 返回的结果为推送操作后的列表的长度</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
**Long leftPushAll(K key, V... values);**
批量把一个数组插入到列表中
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：String[] stringarrays &#x3D; new String[]&#123;&quot;1&quot;,&quot;2&quot;,&quot;3&quot;&#125;;</span><br><span class="line">     template.opsForList().leftPushAll(&quot;listarray&quot;,stringarrays);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listarray&quot;,0,-1));</span><br><span class="line">结果:[3, 2, 1]</span><br></pre></td></tr></table></figure>
**Long leftPushAll(K key, Collection<V> values);**
批量把一个集合插入到列表中
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;Object&gt; strings &#x3D; new ArrayList&lt;Object&gt;();</span><br><span class="line">     strings.add(&quot;1&quot;);</span><br><span class="line">     strings.add(&quot;2&quot;);</span><br><span class="line">     strings.add(&quot;3&quot;);</span><br><span class="line">     template.opsForList().leftPushAll(&quot;listcollection4&quot;, strings);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listcollection4&quot;,0,-1));</span><br><span class="line">结果:[3, 2, 1]</span><br></pre></td></tr></table></figure>
**Long leftPushIfPresent(K key, V value);**
只有存在key对应的列表才能将这个value值插入到key所对应的列表中
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().leftPushIfPresent(&quot;leftPushIfPresent&quot;,&quot;aa&quot;));</span><br><span class="line">     System.out.println(template.opsForList().leftPushIfPresent(&quot;leftPushIfPresent&quot;,&quot;bb&quot;));</span><br><span class="line">     &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">     System.out.println(template.opsForList().leftPush(&quot;leftPushIfPresent&quot;,&quot;aa&quot;));</span><br><span class="line">     System.out.println(template.opsForList().leftPushIfPresent(&quot;leftPushIfPresent&quot;,&quot;bb&quot;));</span><br><span class="line">结果:</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
**Long leftPush(K key, V pivot, V value);**
把value值放到key对应列表中pivot值的左面，如果pivot值存在的话
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().leftPush(&quot;list&quot;,&quot;java&quot;,&quot;oc&quot;);</span><br><span class="line">     System.out.print(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">结果：[c++, python, oc, java, c#, c#]</span><br></pre></td></tr></table></figure>
**Long rightPush(K key, V value);**
将所有指定的值插入存储在键的列表的头部。如果键不存在，则在执行推送操作之前将其创建为空列表。（从右边插入）
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().rightPush(&quot;listRight&quot;,&quot;java&quot;);</span><br><span class="line">     template.opsForList().rightPush(&quot;listRight&quot;,&quot;python&quot;);</span><br><span class="line">     template.opsForList().rightPush(&quot;listRight&quot;,&quot;c++&quot;);</span><br><span class="line">结果:</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
**Long rightPushAll(K key, V... values);**
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：String[] stringarrays &#x3D; new String[]&#123;&quot;1&quot;,&quot;2&quot;,&quot;3&quot;&#125;;</span><br><span class="line">     template.opsForList().rightPushAll(&quot;listarrayright&quot;,stringarrays);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listarrayright&quot;,0,-1));</span><br><span class="line">结果:[1, 2, 3]</span><br></pre></td></tr></table></figure>
**Long rightPushAll(K key, Collection<V> values);**
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;Object&gt; strings &#x3D; new ArrayList&lt;Object&gt;();</span><br><span class="line">     strings.add(&quot;1&quot;);</span><br><span class="line">     strings.add(&quot;2&quot;);</span><br><span class="line">     strings.add(&quot;3&quot;);</span><br><span class="line">     template.opsForList().rightPushAll(&quot;listcollectionright&quot;, strings);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listcollectionright&quot;,0,-1));</span><br><span class="line">结果:[1, 2, 3]</span><br></pre></td></tr></table></figure>
**Long rightPushIfPresent(K key, V value);**
只有存在key对应的列表才能将这个value值插入到key所对应的列表中
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().rightPushIfPresent(&quot;rightPushIfPresent&quot;,&quot;aa&quot;));</span><br><span class="line">   System.out.println(template.opsForList().rightPushIfPresent(&quot;rightPushIfPresent&quot;,&quot;bb&quot;));</span><br><span class="line">   System.out.println(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line">   System.out.println(template.opsForList().rightPush(&quot;rightPushIfPresent&quot;,&quot;aa&quot;));</span><br><span class="line">   System.out.println(template.opsForList().rightPushIfPresent(&quot;rightPushIfPresent&quot;,&quot;bb&quot;));</span><br><span class="line">结果:</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
**Long rightPush(K key, V pivot, V value);**
把value值放到key对应列表中pivot值的右面，如果pivot值存在的话
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">     template.opsForList().rightPush(&quot;listRight&quot;,&quot;python&quot;,&quot;oc&quot;);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[java, python, c++]</span><br><span class="line">[java, python, oc, c++]</span><br></pre></td></tr></table></figure>
**void set(K key, long index, V value);**
在列表中index的位置设置value值
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">     template.opsForList().set(&quot;listRight&quot;,1,&quot;setValue&quot;);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[java, python, oc, c++]</span><br><span class="line">[java, setValue, oc, c++]</span><br></pre></td></tr></table></figure>
**Long remove(K key, long count, Object value);**
从存储在键中的列表中删除等于值的元素的第一个计数事件。

<p>计数参数以下列方式影响操作：</p>
<ul>
<li>count&gt; 0：删除等于从头到尾移动的值的元素。</li>
<li>count &lt;0：删除等于从尾到头移动的值的元素。</li>
<li>count = 0：删除等于value的所有元素。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">     template.opsForList().remove(&quot;listRight&quot;,1,&quot;setValue&quot;);&#x2F;&#x2F;将删除列表中存储的列表中第一次次出现的“setValue”。</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[java, setValue, oc, c++]</span><br><span class="line">[java, oc, c++]</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>V index(K key, long index);</strong><br>根据下表获取列表中的值，下标是从0开始的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;listRight&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForList().index(&quot;listRight&quot;,2));</span><br><span class="line">结果:</span><br><span class="line">[java, oc, c++]</span><br><span class="line">c++</span><br></pre></td></tr></table></figure>
<p><strong>V leftPop(K key);</strong><br>弹出最左边的元素，弹出之后该值在列表中将不复存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForList().leftPop(&quot;list&quot;));</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[c++, python, oc, java, c#, c#]</span><br><span class="line">c++</span><br><span class="line">[python, oc, java, c#, c#]</span><br></pre></td></tr></table></figure>
<p><strong>V leftPop(K key, long timeout, TimeUnit unit);</strong><br>移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与 leftPop(K key);一样</span><br></pre></td></tr></table></figure>
<p><strong>V rightPop(K key);</strong><br>弹出最右边的元素，弹出之后该值在列表中将不复存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用： System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">      System.out.println(template.opsForList().rightPop(&quot;list&quot;));</span><br><span class="line">      System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[python, oc, java, c#, c#]</span><br><span class="line">c#</span><br><span class="line">[python, oc, java, c#]</span><br></pre></td></tr></table></figure>
<p><strong>V rightPop(K key, long timeout, TimeUnit unit);</strong><br>移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与 rightPop(K key);一样</span><br></pre></td></tr></table></figure>
<p><strong>V rightPopAndLeftPush(K sourceKey, K destinationKey);</strong><br>用于移除列表的最后一个元素，并将该元素添加到另一个列表并返回。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">     template.opsForList().rightPopAndLeftPush(&quot;list&quot;,&quot;rightPopAndLeftPush&quot;);</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;list&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForList().range(&quot;rightPopAndLeftPush&quot;,0,-1));</span><br><span class="line">结果:</span><br><span class="line">[oc, java,c#]</span><br><span class="line">[oc, java]</span><br><span class="line">[c#]</span><br></pre></td></tr></table></figure>
<p><strong>V rightPopAndLeftPush(K sourceKey, K destinationKey, long timeout, TimeUnit unit);</strong><br>用于移除列表的最后一个元素，并将该元素添加到另一个列表并返回，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与rightPopAndLeftPush(K sourceKey, K destinationKey)一样</span><br></pre></td></tr></table></figure>

<h1 id="Redis的Hash数据结构"><a href="#Redis的Hash数据结构" class="headerlink" title="Redis的Hash数据结构"></a>Redis的Hash数据结构</h1><p>Redis的散列可以让用户将多个键值对存储到一个Redis键里面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface HashOperations&lt;H,HK,HV&gt;</span><br><span class="line">&#x2F;&#x2F; HashOperations提供一系列方法操作hash</span><br></pre></td></tr></table></figure>
<p>初始数据:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">template.opsForHash().put(&quot;redisHash&quot;,&quot;name&quot;,&quot;tom&quot;);</span><br><span class="line">template.opsForHash().put(&quot;redisHash&quot;,&quot;age&quot;,26);</span><br><span class="line">template.opsForHash().put(&quot;redisHash&quot;,&quot;class&quot;,&quot;6&quot;);</span><br><span class="line"> </span><br><span class="line">Map&lt;String,Object&gt; testMap &#x3D; new HashMap();</span><br><span class="line">testMap.put(&quot;name&quot;,&quot;jack&quot;);</span><br><span class="line">testMap.put(&quot;age&quot;,27);</span><br><span class="line">testMap.put(&quot;class&quot;,&quot;1&quot;);</span><br><span class="line">template.opsForHash().putAll(&quot;redisHash1&quot;,testMap);</span><br></pre></td></tr></table></figure>
<p><strong>Long delete(H key, Object… hashKeys);</strong><br>删除给定的哈希hashKeys</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().delete(&quot;redisHash&quot;,&quot;name&quot;));</span><br><span class="line">     System.out.println(template.opsForHash().entries(&quot;redisHash&quot;));</span><br><span class="line">结果：</span><br><span class="line">1</span><br><span class="line">&#123;class&#x3D;6, age&#x3D;28.1&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Boolean hasKey(H key, Object hashKey);</strong><br>确定哈希hashKey是否存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().hasKey(&quot;redisHash&quot;,&quot;age&quot;));</span><br><span class="line">     System.out.println(template.opsForHash().hasKey(&quot;redisHash&quot;,&quot;ttt&quot;));</span><br><span class="line">结果：</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<p><strong>HV get(H key, Object hashKey);</strong><br>从键中的哈希获取给定hashKey的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().get(&quot;redisHash&quot;,&quot;age&quot;));</span><br><span class="line">结果：26</span><br></pre></td></tr></table></figure>
<p><strong>List<HV> multiGet(H key, Collection<HK> hashKeys);</strong><br>从哈希中获取给定hashKey的值<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;Object&gt; kes &#x3D; new ArrayList&lt;Object&gt;();</span><br><span class="line">     kes.add(&quot;name&quot;);</span><br><span class="line">     kes.add(&quot;age&quot;);</span><br><span class="line">     System.out.println(template.opsForHash().multiGet(&quot;redisHash&quot;,kes));</span><br><span class="line">结果：[jack, 28.1]</span><br></pre></td></tr></table></figure><br><strong>Long increment(H key, HK hashKey, long delta);</strong><br>通过给定的delta增加散列hashKey的值（整型）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().get(&quot;redisHash&quot;,&quot;age&quot;));</span><br><span class="line">    System.out.println(template.opsForHash().increment(&quot;redisHash&quot;,&quot;age&quot;,1));</span><br><span class="line">结果：</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td></tr></table></figure>
<p><strong>Double increment(H key, HK hashKey, double delta);</strong><br>通过给定的delta增加散列hashKey的值（浮点数）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().get(&quot;redisHash&quot;,&quot;age&quot;));</span><br><span class="line">    System.out.println(template.opsForHash().increment(&quot;redisHash&quot;,&quot;age&quot;,1.1));</span><br><span class="line">结果：</span><br><span class="line">27</span><br><span class="line">28.1</span><br></pre></td></tr></table></figure>
<p><strong>Set<HK> keys(H key);</strong><br>获取key所对应的散列表的key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().keys(&quot;redisHash1&quot;));</span><br><span class="line">     &#x2F;&#x2F;redisHash1所对应的散列表为&#123;class&#x3D;1, name&#x3D;jack, age&#x3D;27&#125;</span><br><span class="line">结果：[name, class, age]</span><br></pre></td></tr></table></figure>
<p><strong>Long size(H key);</strong><br>获取key所对应的散列表的大小个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().size(&quot;redisHash1&quot;));</span><br><span class="line">     &#x2F;&#x2F;redisHash1所对应的散列表为&#123;class&#x3D;1, name&#x3D;jack, age&#x3D;27&#125;</span><br><span class="line">结果：3</span><br></pre></td></tr></table></figure>
<p><strong>void putAll(H key, Map&lt;? extends HK, ? extends HV&gt; m);</strong><br>使用m中提供的多个散列字段设置到key对应的散列表中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,Object&gt; testMap &#x3D; new HashMap();</span><br><span class="line">     testMap.put(&quot;name&quot;,&quot;jack&quot;);</span><br><span class="line">     testMap.put(&quot;age&quot;,27);</span><br><span class="line">     testMap.put(&quot;class&quot;,&quot;1&quot;);</span><br><span class="line">     template.opsForHash().putAll(&quot;redisHash1&quot;,testMap);</span><br><span class="line">     System.out.println(template.opsForHash().entries(&quot;redisHash1&quot;));</span><br><span class="line">结果：&#123;class&#x3D;1, name&#x3D;jack, age&#x3D;27&#125;</span><br></pre></td></tr></table></figure>
<p><strong>void put(H key, HK hashKey, HV value);</strong><br>设置散列hashKey的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForHash().put(&quot;redisHash&quot;,&quot;name&quot;,&quot;tom&quot;);</span><br><span class="line">     template.opsForHash().put(&quot;redisHash&quot;,&quot;age&quot;,26);</span><br><span class="line">     template.opsForHash().put(&quot;redisHash&quot;,&quot;class&quot;,&quot;6&quot;);</span><br><span class="line">     System.out.println(template.opsForHash().entries(&quot;redisHash&quot;));</span><br><span class="line">结果：&#123;age&#x3D;26, class&#x3D;6, name&#x3D;tom&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Boolean putIfAbsent(H key, HK hashKey, HV value);</strong><br>仅当hashKey不存在时才设置散列hashKey的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().putIfAbsent(&quot;redisHash&quot;,&quot;age&quot;,30));</span><br><span class="line">     System.out.println(template.opsForHash().putIfAbsent(&quot;redisHash&quot;,&quot;kkk&quot;,&quot;kkk&quot;));</span><br><span class="line">结果：</span><br><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p><strong>List<HV> values(H key);</strong><br>获取整个哈希存储的值根据密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().values(&quot;redisHash&quot;));</span><br><span class="line">结果：[tom, 26, 6]</span><br></pre></td></tr></table></figure>
<p><strong>Map&lt;HK, HV&gt; entries(H key);</strong><br>获取整个哈希存储根据密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForHash().entries(&quot;redisHash&quot;));</span><br><span class="line">结果：&#123;age&#x3D;26, class&#x3D;6, name&#x3D;tom&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Cursor&lt;Map.Entry&lt;HK, HV&gt;&gt; scan(H key, ScanOptions options);</strong><br>使用Cursor在key的hash中迭代，相当于迭代器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用：Cursor&lt;Map.Entry&lt;Object, Object&gt;&gt; curosr &#x3D; template.opsForHash().scan(&quot;redisHash&quot;, ScanOptions.ScanOptions.NONE);</span><br><span class="line">     while(curosr.hasNext())&#123;</span><br><span class="line">        Map.Entry&lt;Object, Object&gt; entry &#x3D; curosr.next();</span><br><span class="line">        System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">age:28.1</span><br><span class="line">class:6</span><br><span class="line">kkk:kkk</span><br></pre></td></tr></table></figure>

<h1 id="Redis的Set数据结构"><a href="#Redis的Set数据结构" class="headerlink" title="Redis的Set数据结构"></a>Redis的Set数据结构</h1><p>Redis的Set是string类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p>
<p>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface SetOperations&lt;K,V&gt;</span><br><span class="line">&#x2F;&#x2F; SetOperations提供了对无序集合的一系列操作</span><br></pre></td></tr></table></figure>
<p><strong>Long add(K key, V… values);</strong><br>无序集合中添加元素，返回添加个数</p>
<p>也可以直接在add里面添加多个值 如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">template.opsForSet().add(&quot;setTest&quot;,&quot;aaa&quot;,&quot;bbb&quot;)</span><br><span class="line"></span><br><span class="line">使用：String[] strarrays &#x3D; new String[]&#123;&quot;strarr1&quot;,&quot;sgtarr2&quot;&#125;;</span><br><span class="line">     System.out.println(template.opsForSet().add(&quot;setTest&quot;, strarrays));</span><br><span class="line">结果：2</span><br></pre></td></tr></table></figure>
<p><strong>Long remove(K key, Object… values);</strong><br>移除集合中一个或多个成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：String[] strarrays &#x3D; new String[]&#123;&quot;strarr1&quot;,&quot;sgtarr2&quot;&#125;;</span><br><span class="line">     System.out.println(template.opsForSet().remove(&quot;setTest&quot;,strarrays));</span><br><span class="line">结果：2</span><br></pre></td></tr></table></figure>
<p><strong>V pop(K key);</strong><br>移除并返回集合中的一个随机元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().pop(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">结果：</span><br><span class="line">bbb</span><br><span class="line">[aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>Boolean move(K key, V value, K destKey);</strong><br>将 member 元素从 source 集合移动到 destination 集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForSet().move(&quot;setTest&quot;,&quot;aaa&quot;,&quot;setTest2&quot;);</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">结果：</span><br><span class="line">[ccc]</span><br><span class="line">[aaa]</span><br></pre></td></tr></table></figure>
<p><strong>Long size(K key);</strong><br>无序集合的大小长度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().size(&quot;setTest&quot;));</span><br><span class="line">结果：1</span><br></pre></td></tr></table></figure>
<p><strong>Boolean isMember(K key, Object o);</strong><br>判断 member 元素是否是集合 key 的成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().isMember(&quot;setTest&quot;,&quot;ccc&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().isMember(&quot;setTest&quot;,&quot;asd&quot;));</span><br><span class="line">结果：</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> intersect(K key, K otherKey);</strong><br>key对应的无序集合与otherKey对应的无序集合求交集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().intersect(&quot;setTest&quot;,&quot;setTest2&quot;));</span><br><span class="line">结果：</span><br><span class="line">[aaa, ccc]</span><br><span class="line">[aaa]</span><br><span class="line">[aaa]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> intersect(K key, Collection<K> otherKeys);</strong><br>key对应的无序集合与多个otherKey对应的无序集合求交集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">     System.out.println(template.opsForSet().intersect(&quot;setTest&quot;,strlist));</span><br><span class="line">结果：</span><br><span class="line">[aaa, ccc]</span><br><span class="line">[aaa]</span><br><span class="line">[ccc, aaa]</span><br><span class="line">[aaa]</span><br></pre></td></tr></table></figure>
<p><strong>Long intersectAndStore(K key, K otherKey, K destKey);</strong><br>key无序集合与otherkey无序集合的交集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">System.out.println(template.opsForSet().intersectAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;destKey1&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;destKey1&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">2</span><br><span class="line">[aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>Long intersectAndStore(K key, Collection<K> otherKeys, K destKey);</strong><br>key对应的无序集合与多个otherKey对应的无序集合求交集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">System.out.println(template.opsForSet().intersectAndStore(&quot;setTest&quot;,strlist,&quot;destKey2&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().members(&quot;destKey2&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[ccc, aaa]</span><br><span class="line">2</span><br><span class="line">[aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> union(K key, K otherKey);</strong><br>key无序集合与otherKey无序集合的并集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().union(&quot;setTest&quot;,&quot;setTest2&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">[ccc, aaa, ddd, bbb]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> union(K key, Collection<K> otherKeys);</strong><br>key无序集合与多个otherKey无序集合的并集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">     System.out.println(template.opsForSet().union(&quot;setTest&quot;,strlist));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">[ddd, xxx, bbb, aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>Long unionAndStore(K key, K otherKey, K destKey);</strong><br>key无序集合与otherkey无序集合的并集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">System.out.println(template.opsForSet().unionAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;unionAndStoreTest1&quot;));</span><br><span class="line">     System.out.println(&quot;unionAndStoreTest1:&quot; + </span><br><span class="line">     template.opsForSet().members(&quot;unionAndStoreTest1&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">4</span><br><span class="line">unionAndStoreTest1:[ccc, aaa, ddd, bbb]</span><br></pre></td></tr></table></figure>
<p><strong>Long unionAndStore(K key, Collection<K> otherKeys, K destKey);</strong><br>key无序集合与多个otherkey无序集合的并集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">System.out.println(template.opsForSet().unionAndStore(&quot;setTest&quot;,strlist,&quot;unionAndStoreTest2&quot;));</span><br><span class="line">     System.out.println(&quot;unionAndStoreTest2:&quot; + </span><br><span class="line">     template.opsForSet().members(&quot;unionAndStoreTest2&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">5</span><br><span class="line">unionAndStoreTest2:[ddd, xxx, bbb, aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> difference(K key, K otherKey);</strong><br>key无序集合与otherKey无序集合的差集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(template.opsForSet().difference(&quot;setTest&quot;,&quot;setTest2&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">[bbb, ddd]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> difference(K key, Collection<K> otherKeys);</strong><br>key无序集合与多个otherKey无序集合的差集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">     System.out.println(template.opsForSet().difference(&quot;setTest&quot;,strlist));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">[bbb, ddd]</span><br></pre></td></tr></table></figure>
<p><strong>Long differenceAndStore(K key, K otherKey, K destKey);</strong><br>key无序集合与otherkey无序集合的差集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">System.out.println(template.opsForSet().differenceAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;differenceAndStore1&quot;));</span><br><span class="line">     System.out.println(&quot;differenceAndStore1:&quot; + </span><br><span class="line">     template.opsForSet().members(&quot;differenceAndStore1&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">2</span><br><span class="line">differenceAndStore1:[bbb, ddd]</span><br></pre></td></tr></table></figure>
<p><strong>Long differenceAndStore(K key, Collection<K> otherKeys, K destKey);</strong><br>key无序集合与多个otherkey无序集合的差集存储到destKey无序集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));</span><br><span class="line">     System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));</span><br><span class="line">     List&lt;String&gt; strlist &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     strlist.add(&quot;setTest2&quot;);</span><br><span class="line">     strlist.add(&quot;setTest3&quot;);</span><br><span class="line">System.out.println(template.opsForSet().differenceAndStore(&quot;setTest&quot;,strlist,&quot;differenceAndStore2&quot;));</span><br><span class="line">     System.out.println(&quot;differenceAndStore2:&quot; + </span><br><span class="line">     template.opsForSet().members(&quot;differenceAndStore2&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">2</span><br><span class="line">differenceAndStore2:[bbb, ddd]</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> members(K key);</strong><br>返回集合中的所有成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">结果：[ddd, bbb, aaa, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>V randomMember(K key);</strong><br>随机获取key无序集合中的一个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;setTest:&quot; + template.opsForSet().members(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTestrandomMember:&quot; + </span><br><span class="line">     template.opsForSet().randomMember(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTestrandomMember:&quot; + </span><br><span class="line">     template.opsForSet().randomMember(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTestrandomMember:&quot; + </span><br><span class="line">     template.opsForSet().randomMember(&quot;setTest&quot;));</span><br><span class="line">     System.out.println(&quot;setTestrandomMember:&quot; + </span><br><span class="line">     template.opsForSet().randomMember(&quot;setTest&quot;));</span><br><span class="line">结果：</span><br><span class="line">setTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTestrandomMember:aaa</span><br><span class="line">setTestrandomMember:bbb</span><br><span class="line">setTestrandomMember:aaa</span><br><span class="line">setTestrandomMember:ddd</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> distinctRandomMembers(K key, long count);</strong><br>获取多个key无序集合中的元素（去重），count表示个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;randomMembers:&quot; + </span><br><span class="line">     template.opsForSet().distinctRandomMembers(&quot;setTest&quot;,5));</span><br><span class="line">结果：randomMembers:[aaa, bbb, ddd, ccc]</span><br></pre></td></tr></table></figure>
<p><strong>List<V> randomMembers(K key, long count);</strong><br>获取多个key无序集合中的元素，count表示个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(&quot;randomMembers:&quot; + </span><br><span class="line">     template.opsForSet().randomMembers(&quot;setTest&quot;,5));</span><br><span class="line">结果：randomMembers:[ccc, ddd, ddd, ddd, aaa]</span><br></pre></td></tr></table></figure>
<p><strong>Cursor<V> scan(K key, ScanOptions options);</strong><br>遍历set</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用： Cursor&lt;Object&gt; curosr &#x3D; template.opsForSet().scan(&quot;setTest&quot;, ScanOptions.NONE);</span><br><span class="line">      while(curosr.hasNext())&#123;</span><br><span class="line">         System.out.println(curosr.next());</span><br><span class="line">      &#125;</span><br><span class="line">结果：</span><br><span class="line">ddd</span><br><span class="line">bbb</span><br><span class="line">aaa</span><br><span class="line">ccc</span><br></pre></td></tr></table></figure>

<h1 id="Redis的ZSet数据结构"><a href="#Redis的ZSet数据结构" class="headerlink" title="Redis的ZSet数据结构"></a>Redis的ZSet数据结构</h1><p>Redis 有序集合和无序集合一样也是string类型元素的集合,且不允许重复的成员。</p>
<p>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p>
<p>有序集合的成员是唯一的,但分数(score)却可以重复。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface ZSetOperations&lt;K,V&gt;</span><br><span class="line">&#x2F;&#x2F; ZSetOperations提供了一系列方法对有序集合进行操作</span><br></pre></td></tr></table></figure>
<p><strong>Boolean add(K key, V value, double score);</strong><br>新增一个有序集合，存在的话为false，不存在的话为true</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().add(&quot;zset1&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">结果：true</span><br></pre></td></tr></table></figure>
<p><strong>Long add(K key, Set&lt;TypedTuple<V>&gt; tuples);</strong><br>新增一个有序集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用：ZSetOperations.TypedTuple&lt;Object&gt; objectTypedTuple1 &#x3D; new DefaultTypedTuple&lt;Object&gt;(&quot;zset-5&quot;,9.6);</span><br><span class="line">     ZSetOperations.TypedTuple&lt;Object&gt; objectTypedTuple2 &#x3D; new DefaultTypedTuple&lt;Object&gt;(&quot;zset-6&quot;,9.9);</span><br><span class="line">     Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; new HashSet&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt;();</span><br><span class="line">     tuples.add(objectTypedTuple1);</span><br><span class="line">     tuples.add(objectTypedTuple2);</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zset1&quot;,tuples));</span><br><span class="line">     System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">结果：[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</span><br></pre></td></tr></table></figure>
<p><strong>Long remove(K key, Object… values);</strong><br>从有序集合中移除一个或者多个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForZSet().remove(&quot;zset1&quot;,&quot;zset-6&quot;));</span><br><span class="line">     System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">结果：</span><br><span class="line">[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</span><br><span class="line">1</span><br><span class="line">[zset-1, zset-2, zset-3, zset-4, zset-5]</span><br></pre></td></tr></table></figure>
<p><strong>Double incrementScore(K key, V value, double delta);</strong><br>增加元素的score值，并返回增加后的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().incrementScore(&quot;zset1&quot;,&quot;zset-1&quot;,1.1));  &#x2F;&#x2F;原为1.1</span><br><span class="line">结果：2.2</span><br></pre></td></tr></table></figure>
<p><strong>Long rank(K key, Object o);</strong><br>返回有序集中指定成员的排名，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForZSet().rank(&quot;zset1&quot;,&quot;zset-2&quot;));</span><br><span class="line">结果：</span><br><span class="line">[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br><span class="line">0   &#x2F;&#x2F;表明排名第一</span><br></pre></td></tr></table></figure>
<p><strong>Long reverseRank(K key, Object o);</strong><br>返回有序集中指定成员的排名，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForZSet().reverseRank(&quot;zset1&quot;,&quot;zset-2&quot;));</span><br><span class="line">结果：</span><br><span class="line">[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br><span class="line">4 &#x2F;&#x2F;递减之后排到第五位去了</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> range(K key, long start, long end);</strong><br>通过索引区间返回有序集合成指定区间内的成员，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));</span><br><span class="line">结果：[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; rangeWithScores(K key, long start, long end);</strong><br>通过索引区间返回有序集合成指定区间内的成员对象，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用：Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeWithScores(&quot;zset1&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">         ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">         System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-2score:1.2</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br><span class="line">value:zset-4score:6.6</span><br><span class="line">value:zset-5score:9.6</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> rangeByScore(K key, double min, double max);</strong><br>通过分数返回有序集合指定区间内的成员，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().rangeByScore(&quot;zset1&quot;,0,5));</span><br><span class="line">结果：[zset-2, zset-1, zset-3]</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; rangeByScoreWithScores(K key, double min, double max);</strong><br>通过分数返回有序集合指定区间内的成员对象，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeByScoreWithScores(&quot;zset1&quot;,0,5);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">        ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">        System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-2score:1.2</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> rangeByScore(K key, double min, double max, long offset, long count);</strong><br>通过分数返回有序集合指定区间内的成员，并在索引范围内，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用： System.out.println(template.opsForZSet().rangeByScore(&quot;zset1&quot;,0,5));</span><br><span class="line">      System.out.println(template.opsForZSet().rangeByScore(&quot;zset1&quot;,0,5,1,2));</span><br><span class="line">结果：</span><br><span class="line">[zset-2, zset-1, zset-3]</span><br><span class="line">[zset-1, zset-3]</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; rangeByScoreWithScores(K key, double min, double max, long offset, long count);</strong><br>通过分数返回有序集合指定区间内的成员对象，并在索引范围内，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用：Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeByScoreWithScores(&quot;zset1&quot;,0,5,1,2);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">         ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">         System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> reverseRange(K key, long start, long end);</strong><br>通过索引区间返回有序集合成指定区间内的成员，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().reverseRange(&quot;zset1&quot;,0,-1));</span><br><span class="line">结果：[zset-5, zset-4, zset-3, zset-1, zset-2]</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; reverseRangeWithScores(K key, long start, long end);</strong><br>通过索引区间返回有序集合成指定区间内的成员对象，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用：Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().reverseRangeWithScores(&quot;zset1&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">        ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">        System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-5score:9.6</span><br><span class="line">value:zset-4score:6.6</span><br><span class="line">value:zset-3score:2.3</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-2score:1.2</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> reverseRangeByScore(K key, double min, double max);</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：与rangeByScore调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; reverseRangeByScoreWithScores(K key, double min, double max);</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：与rangeByScoreWithScores调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</span><br></pre></td></tr></table></figure>
<p><strong>Set<V> reverseRangeByScore(K key, double min, double max, long offset, long count);</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：与rangeByScore调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</span><br></pre></td></tr></table></figure>
<p><strong>Set&lt;TypedTuple<V>&gt; reverseRangeByScoreWithScores(K key, double min, double max, long offset, long count);</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：与rangeByScoreWithScores调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</span><br></pre></td></tr></table></figure>
<p><strong>Long count(K key, double min, double max);</strong><br>通过分数返回有序集合指定区间内的成员个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().rangeByScore(&quot;zset1&quot;,0,5));</span><br><span class="line">     System.out.println(template.opsForZSet().count(&quot;zset1&quot;,0,5));</span><br><span class="line">结果：</span><br><span class="line">[zset-2, zset-1, zset-3]</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p><strong>Long size(K key);</strong><br>获取有序集合的成员数，内部调用的就是zCard方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().size(&quot;zset1&quot;));</span><br><span class="line">结果：6</span><br></pre></td></tr></table></figure>
<p><strong>Long zCard(K key);</strong><br>获取有序集合的成员数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().zCard(&quot;zset1&quot;));</span><br><span class="line">结果：6</span><br></pre></td></tr></table></figure>
<p><strong>Double score(K key, Object o);</strong><br>获取指定成员的score值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().score(&quot;zset1&quot;,&quot;zset-1&quot;));</span><br><span class="line">结果：2.2</span><br></pre></td></tr></table></figure>
<p><strong>Long removeRange(K key, long start, long end);</strong><br>移除指定索引位置的成员，其中有序集成员按分数值递增(从小到大)顺序排列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForZSet().removeRange(&quot;zset2&quot;,1,2));</span><br><span class="line">     System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));</span><br><span class="line">结果：</span><br><span class="line">[zset-1, zset-2, zset-3, zset-4]</span><br><span class="line">2</span><br><span class="line">[zset-1, zset-4]</span><br></pre></td></tr></table></figure>
<p><strong>Long removeRangeByScore(K key, double min, double max);</strong><br>根据指定的score值得范围来移除成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：&#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-1&quot;,1.1));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-2&quot;,1.2));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-3&quot;,2.3));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-4&quot;,6.6));</span><br><span class="line">     System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));</span><br><span class="line">     System.out.println(template.opsForZSet().removeRangeByScore(&quot;zset2&quot;,2,3));</span><br><span class="line">     System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));</span><br><span class="line">结果：</span><br><span class="line">[zset-1, zset-2, zset-3,zset-4]</span><br><span class="line">1</span><br><span class="line">[zset-1, zset-2, zset-4]</span><br></pre></td></tr></table></figure>
<p><strong>Long unionAndStore(K key, K otherKey, K destKey);</strong><br>计算给定的一个有序集的并集，并存储在新的 destKey中，key相同的话会把score值相加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-2&quot;,2.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-3&quot;,3.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-4&quot;,6.0));</span><br><span class="line"> </span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-2&quot;,2.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-3&quot;,3.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-4&quot;,6.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-5&quot;,7.0));</span><br><span class="line"> </span><br><span class="line">System.out.println(template.opsForZSet().unionAndStore(&quot;zzset1&quot;,&quot;zzset2&quot;,&quot;destZset11&quot;));</span><br><span class="line"> </span><br><span class="line">     Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeWithScores(&quot;destZset11&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">         ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">         System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-1score:2.0</span><br><span class="line">value:zset-2score:4.0</span><br><span class="line">value:zset-3score:6.0</span><br><span class="line">value:zset-5score:7.0</span><br><span class="line">value:zset-4score:12.0</span><br></pre></td></tr></table></figure>
<p><strong>Long unionAndStore(K key, Collection<K> otherKeys, K destKey);</strong><br>计算给定的多个有序集的并集，并存储在新的 destKey中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">使用：&#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-2&quot;,2.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-3&quot;,3.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-4&quot;,6.0));</span><br><span class="line">     </span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-2&quot;,2.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-3&quot;,3.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-4&quot;,6.0));</span><br><span class="line">     &#x2F;&#x2F;System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-5&quot;,7.0));</span><br><span class="line"> </span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-1&quot;,1.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-2&quot;,2.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-3&quot;,3.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-4&quot;,6.0));</span><br><span class="line">     System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-5&quot;,7.0));</span><br><span class="line"> </span><br><span class="line">     List&lt;String&gt; stringList &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     stringList.add(&quot;zzset2&quot;);</span><br><span class="line">     stringList.add(&quot;zzset3&quot;);</span><br><span class="line"> </span><br><span class="line">System.out.println(template.opsForZSet().unionAndStore(&quot;zzset1&quot;,stringList,&quot;destZset22&quot;));</span><br><span class="line"> </span><br><span class="line">     Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeWithScores(&quot;destZset22&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">            ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">            System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-1score:3.0</span><br><span class="line">value:zset-2score:6.0</span><br><span class="line">value:zset-3score:9.0</span><br><span class="line">value:zset-5score:14.0</span><br><span class="line">value:zset-4score:18.0</span><br></pre></td></tr></table></figure>
<p><strong>Long intersectAndStore(K key, K otherKey, K destKey);</strong><br>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForZSet().intersectAndStore(&quot;zzset1&quot;,&quot;zzset2&quot;,&quot;destZset33&quot;));</span><br><span class="line">     Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeWithScores(&quot;destZset33&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">            ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">            System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-1score:2.0</span><br><span class="line">value:zset-2score:4.0</span><br><span class="line">value:zset-3score:6.0</span><br><span class="line">value:zset-4score:12.0</span><br></pre></td></tr></table></figure>
<p><strong>Long intersectAndStore(K key, Collection<K> otherKeys, K destKey);</strong><br>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;String&gt; stringList &#x3D; new ArrayList&lt;String&gt;();</span><br><span class="line">     stringList.add(&quot;zzset2&quot;);</span><br><span class="line">     stringList.add(&quot;zzset3&quot;);</span><br><span class="line">System.out.println(template.opsForZSet().intersectAndStore(&quot;zzset1&quot;,stringList,&quot;destZset44&quot;));</span><br><span class="line"> </span><br><span class="line">     Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples &#x3D; template.opsForZSet().rangeWithScores(&quot;destZset44&quot;,0,-1);</span><br><span class="line">     Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator &#x3D; tuples.iterator();</span><br><span class="line">     while (iterator.hasNext())</span><br><span class="line">     &#123;</span><br><span class="line">            ZSetOperations.TypedTuple&lt;Object&gt; typedTuple &#x3D; iterator.next();</span><br><span class="line">            System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">value:zset-1score:3.0</span><br><span class="line">value:zset-2score:6.0</span><br><span class="line">value:zset-3score:9.0</span><br><span class="line">value:zset-4score:18.0</span><br></pre></td></tr></table></figure>
<p><strong>Cursor&lt;TypedTuple<V>&gt; scan(K key, ScanOptions options);</strong><br>遍历zset</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用： Cursor&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; cursor &#x3D; template.opsForZSet().scan(&quot;zzset1&quot;, ScanOptions.NONE);</span><br><span class="line">     while (cursor.hasNext())&#123;</span><br><span class="line">        ZSetOperations.TypedTuple&lt;Object&gt; item &#x3D; cursor.next();</span><br><span class="line">        System.out.println(item.getValue() + &quot;:&quot; + item.getScore());</span><br><span class="line">     &#125;</span><br><span class="line">结果：</span><br><span class="line">zset-1:1.0</span><br><span class="line">zset-2:2.0</span><br><span class="line">zset-3:3.0</span><br><span class="line">zset-4:6.0</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注</strong>：TimeUnit是java.util.concurrent包下面的一个类，表示给定单元粒度的时间段</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 常用的颗粒度</span><br><span class="line">TimeUnit.DAYS &#x2F;&#x2F;天</span><br><span class="line">TimeUnit.HOURS &#x2F;&#x2F;小时</span><br><span class="line">TimeUnit.MINUTES &#x2F;&#x2F;分钟</span><br><span class="line">TimeUnit.SECONDS &#x2F;&#x2F;秒</span><br><span class="line">TimeUnit.MILLISECONDS &#x2F;&#x2F;毫秒</span><br></pre></td></tr></table></figure></div><div class="tag_share"><div class="post_share"><div class="social-share" data-image="http://pengjunlee.3vzhuji.net/static/img/top_img4.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="http://pengjunlee.3vzhuji.net/static/img/WeChanQR.jpg" alt="微信支付" onclick="window.open('http://pengjunlee.3vzhuji.net/static/img/WeChanQR.jpg')"/><div class="post-qr-code__desc">微信支付</div></li><li class="reward-item"><img class="post-qr-code__img" src="http://pengjunlee.3vzhuji.net/static/img/AliPayQR.jpg" alt="支付宝" onclick="window.open('http://pengjunlee.3vzhuji.net/static/img/AliPayQR.jpg')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/25/springbootB25/"><img class="prev-cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img25.jpg" onerror="onerror=null;src='http://pengjunlee.3vzhuji.net/static/img/cover2.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringBoot基础之--使用spring-boot-maven-plugin插件打包应用</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/25/springbootB23/"><img class="next-cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img23.jpg" onerror="onerror=null;src='http://pengjunlee.3vzhuji.net/static/img/cover2.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SpringBoot基础之--使用Junit进行单元测试</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/07/25/springbootB25/" title="SpringBoot基础之--使用spring-boot-maven-plugin插件打包应用"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img25.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--使用spring-boot-maven-plugin插件打包应用</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/25/springbootB01/" title="SpringBoot基础之--返回的Json中忽略空字段"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img1.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--返回的Json中忽略空字段</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/25/springbootB05/" title="SpringBoot基础之--@Conditional注解"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img5.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--@Conditional注解</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/25/springbootB04/" title="SpringBoot基础之--通过Url访问本地图片"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img4.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--通过Url访问本地图片</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/25/springbootB06/" title="SpringBoot基础之--@JoinColumn注解"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img6.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--@JoinColumn注解</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/25/springbootB09/" title="SpringBoot基础之--dbcp2数据源配置"><img class="relatedPosts_cover" data-src="http://pengjunlee.3vzhuji.net/static/img/top_img9.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-25</div><div class="relatedPosts_title">SpringBoot基础之--dbcp2数据源配置</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'k0QcRvFFw7AovKS8un6pys2S-gzGzoHsz',
  appKey: 'Y5w42nyHhdKlYHT00svHuIya',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(http://pengjunlee.3vzhuji.net/static/img/top_img24.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By pengjunlee</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">簡</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/third-party/ClickShowText.js"></script><script src="/js/search/local-search.js"></script></body></html>